#!/bin/bash

myname=$(basename "$0")

#############################################################################
# Message
#############################################################################

function message {

	echo $(date +%H:%M:%S) '----------------------------------------' "$myname" "$1" >&2

}

#############################################################################
# Debug
#############################################################################

function debug {

	echo 'msg='"$msg"'<' >&2
	echo ' p1='"$p1"'<' >&2
	echo ' p2='"$p2"'<' >&2

}

#############################################################################
# Start
#############################################################################

message "start."

if [ "x$1" = "xdebug" ] ; then
	do_debug=yes
	echo "OK do debug" >&2
	shift
fi

#############################################################################
# Main
#############################################################################

msg="$1"
shift
p1=$(echo "$1" | sed 's/^.\(.*\).$/\1/')
p2=$(echo "$2" | sed 's/^.\(.*\).$/\1/')

[[ "$do_debug" ]] && debug

if [ "x$p1" = "x" ] ; then
	echo "$msg"
	message "end. (fail)"
	exit 1
fi

echo "I can't see anything wrong with this. Let's go!" >&2

#############################################################################
# End
#############################################################################

message "end. (success)"

exit
