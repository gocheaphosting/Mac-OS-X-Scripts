#!/bin/bash

myname=$(basename "$0")

#############################################################################
# Message
#############################################################################

function message {

	echo $(date +%H:%M:%S) '----------------------------------------' "$myname" "$1" >&2

}

#############################################################################
# Start
#############################################################################

message "start."

#############################################################################
# Main
#############################################################################

msg="$1"

p2=$(echo "$2" | sed 's/^.\(.*\).$//')
p3=$(echo "$3" | sed 's/^.\(.*\).$//')

echo ' $1='"$1"'<' >&2
echo ' $2='"$2"'<' >&2
echo ' $3='"$3"'<' >&2
echo 'msg='"$msg"'<' >&2
echo ' p2='"$p2"'<' >&2
echo ' p3='"$p3"'<' >&2

if [ "x$p2" = "x" ] ; then
	printf '%-30s %s\n' "$(date +%H:%M:%S) [$(basename $0)]" "$msg"
	message "end. (fail)"
	exit 1
fi

echo "I can't see anything wrong with this. Let\'s go!" >&2

#############################################################################
# End
#############################################################################

message "end. (success)"

exit
